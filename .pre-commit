#!/bin/bash

# .pre-commit

# Format Rust files
echo "Running rustfmt..."
if ! cargo fmt -- --check; then
    echo "rustfmt failed. Please format your code."
    exit 1
fi

# Run Clippy for linting
echo "Running clippy..."
if ! cargo clippy -- -D warnings; then
    echo "clippy failed. Please fix the linting issues."
    exit 1
fi

# Run tests
echo "Running tests..."
if ! cargo test; then
    echo "Tests failed. Please fix the test failures."
    exit 1
fi

echo "All checks passed!"
exit 0